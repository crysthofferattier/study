#!/usr/bin/python

import socket
import sys


def valid_arguments():
	if len(sys.argv) != 3:
		print("Missing arguments")
		exit()


def connect(host, port):
	sck = socket.socket(socket.AF_INET, socket.SOCK_STREAM)

	try:
		ss = sck.connect((host, port))

		banner = str(sck.recv(1024))
		print(banner)

		user = "USER test\r\n"
		passwd = "PASS test\r\n"

		sck.send(user)
		user_banner = str(sck.recv(1024))

		print(user_banner)

		sck.send(passwd)
		passwd_banner = str(sck.recv(1024))

		print(passwd_banner)

		sck.send("QUIT\r\n")
		final_banner = str(sck.recv(1024))

		print(final_banner)
	except Exception as e:
		print("ERROR")

	sck.close()


def main():
	valid_arguments()

	host = sys.argv[1]
	port = int(sys.argv[2])

	connect(host, port)


main()